{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\Seventh Semester\\\\FYP\\\\MediQuick-Find-Medicines-Nearby\\\\next\\\\pages\\\\search.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Head from \"next/head\";\nimport { Container, Button, Radio, Form } from 'semantic-ui-react';\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"myChangeHandler\", event => {\n      // console.log(event);\n      let name = event.target.name;\n      let value = event.target.value;\n      this.setState({\n        [name]: value\n      });\n    });\n\n    _defineProperty(this, \"onRadioButtonChangeHandler\", (event, v) => {\n      // this.setState({name: event.target.value});\n      console.log(v);\n      let name = v.name;\n      let value = v.value;\n      this.setState({\n        [name]: value,\n        url: `api/search/${value}`\n      });\n    });\n\n    _defineProperty(this, \"onClickHandler\", event => {\n      let name = event.target.name;\n      let value = event.target.value;\n      this.setState({\n        [name]: value\n      });\n      console.log(name + ': ' + event.target.value);\n    });\n\n    _defineProperty(this, \"onSubmit\", e => {\n      e.preventDefault();\n      console.log(\"Final Name Value: \" + this.state.name);\n      console.log(\"Type: \" + this.state.type);\n      let ref = this;\n      fetch(`api/${this.state.type}/${this.state.name}/search`).then(res => res.json()).then(data => ref.setState({\n        fetchedData: data\n      }, () => console.log(this.state.fetchedData)));\n    });\n\n    _defineProperty(this, \"onKeyUpHandler\", e => {\n      let s = this.state;\n      let ref = this;\n\n      if (s.timer != null) {\n        window.clearTimeout(s.timer);\n      }\n\n      s.timer = setTimeout(function () {\n        if (s.name.length >= s.minlength) {\n          // var req = new XMLHttpRequest();\n          // req.addEventListener(\"load\", function(){\n          // \ts.draw(JSON.parse(this.responseText));\n          // });\n          // req.open(\"GET\", s.url + \"?term=\" + s.name);\n          // req.send();\n          fetch(s.url + \"?term=\" + s.name).then(res => res.json()).then(data => ref.setState({\n            list: data\n          }));\n        } // else{\n        // \ts.box.innerHTML='';\n        // }\n\n      }, s.delay);\n    });\n\n    this.state = {\n      name: '',\n      type: 'brand',\n      delay: 500,\n      minlength: 2,\n      timer: null,\n      url: 'api/search/brand',\n      list: [],\n      fetchedData: []\n    };\n  }\n\n  render() {\n    // let searchAutocomplete = new Suggest ;\n    // searchAutocomplete.autoComplete(\"searchDrug\",\"drugNameSuggestions\",\"api/search/brand\");\n    let options = [];\n\n    if (this.state.list.length !== 0 && this.state.type == 'brand') {\n      options = this.state.list.map(item => {\n        return __jsx(\"option\", {\n          key: item.b_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, item.b_name);\n      });\n    } else if (this.state.list.length !== 0 && this.state.type == 'generic') {\n      options = this.state.list.map(item => {\n        return __jsx(\"option\", {\n          key: item.g_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, item.g_name);\n      });\n    }\n\n    return __jsx(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, __jsx(Head, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, __jsx(\"title\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Initial\"), __jsx(\"link\", {\n      rel: \"stylesheet\",\n      href: \"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    })), __jsx(Form, {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, __jsx(Form.Field, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, __jsx(\"h3\", {\n      style: {\n        paddingTop: 30\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Search Medicine\"), __jsx(\"input\", {\n      id: \"searchDrug\",\n      name: \"name\",\n      placeholder: \"First Name\",\n      list: \"drugNameSuggestions\",\n      autoComplete: \"off\",\n      onChange: this.myChangeHandler,\n      onKeyUp: this.onKeyUpHandler,\n      value: this.state.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), __jsx(\"datalist\", {\n      id: \"drugNameSuggestions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, options)), __jsx(Form.Field, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, __jsx(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Search By\"), __jsx(Radio, {\n      label: \"Brand Name\",\n      name: \"type\",\n      value: \"brand\",\n      checked: this.state.type === 'brand',\n      onChange: this.onRadioButtonChangeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    })), __jsx(Form.Field, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, __jsx(Radio, {\n      label: \"Generic\",\n      name: \"type\",\n      value: \"generic\",\n      checked: this.state.type === 'generic',\n      onChange: this.onRadioButtonChangeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    })), __jsx(Button, {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Submit\")));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["D:/Seventh Semester/FYP/MediQuick-Find-Medicines-Nearby/next/pages/search.js"],"names":["React","Head","Container","Button","Radio","Form","Search","Component","constructor","props","event","name","target","value","setState","v","console","log","url","e","preventDefault","state","type","ref","fetch","then","res","json","data","fetchedData","s","timer","window","clearTimeout","setTimeout","length","minlength","list","delay","render","options","map","item","b_id","b_name","g_id","g_name","onSubmit","paddingTop","myChangeHandler","onKeyUpHandler","onRadioButtonChangeHandler"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Head from \"next/head\";\r\nimport { Container, Button, Radio, Form } from 'semantic-ui-react';\r\n\r\n\r\nclass Search extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: '',\r\n            type: 'brand',\r\n            delay: 500,\r\n\t\t    minlength: 2,\r\n            timer: null,\r\n            url: 'api/search/brand',\r\n            list: [],\r\n            fetchedData: []\r\n        };\r\n    }\r\n\r\n    myChangeHandler = (event) => {\r\n        // console.log(event);\r\n        let name = event.target.name;\r\n        let value = event.target.value;\r\n        this.setState({[name]: value});\r\n    }\r\n\r\n    onRadioButtonChangeHandler = (event, v) => {\r\n        // this.setState({name: event.target.value});\r\n        console.log(v);\r\n        let name = v.name;\r\n        let value = v.value;\r\n        this.setState({[name]: value, url: `api/search/${value}`});\r\n    }\r\n\r\n    onClickHandler = (event) => {\r\n        let name = event.target.name;\r\n        let value = event.target.value;\r\n        this.setState({[name]: value});\r\n        console.log(name + ': ' + event.target.value);\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        console.log(\"Final Name Value: \" + this.state.name);\r\n        console.log(\"Type: \" + this.state.type);\r\n        let ref = this;\r\n        \r\n        fetch(`api/${this.state.type}/${this.state.name}/search`)\r\n            .then(res => res.json())\r\n            .then(data => ref.setState({fetchedData: data}, ()=>(console.log(this.state.fetchedData))));\r\n        \r\n    }\r\n\r\n    onKeyUpHandler = (e) => {\r\n        let s = this.state;\r\n        let ref = this;\r\n        if (s.timer!=null) { window.clearTimeout(s.timer); }\r\n\t\t\ts.timer = setTimeout(function(){\r\n\t\t\t\t\r\n\t\t\t\tif (s.name.length >= s.minlength) {\r\n\t\t\t\t\t// var req = new XMLHttpRequest();\r\n\t\t\t\t\t// req.addEventListener(\"load\", function(){\r\n\t\t\t\t\t// \ts.draw(JSON.parse(this.responseText));\r\n\t\t\t\t\t// });\r\n\t\t\t\t\t// req.open(\"GET\", s.url + \"?term=\" + s.name);\r\n                    // req.send();\r\n\r\n                    \r\n                    \r\n                    fetch(s.url+\"?term=\" + s.name)\r\n                        .then(res => res.json())\r\n                        .then(data => ref.setState({list: data}));\r\n\t\t\t\t}\r\n\t\t\t\t// else{\r\n\t\t\t\t// \ts.box.innerHTML='';\r\n\t\t\t\t// }\r\n\r\n\t\t\t}, s.delay);\r\n    }\r\n\r\n    render () {\r\n        // let searchAutocomplete = new Suggest ;\r\n        // searchAutocomplete.autoComplete(\"searchDrug\",\"drugNameSuggestions\",\"api/search/brand\");\r\n        let options = [];\r\n        if(this.state.list.length!==0 && this.state.type == 'brand'){\r\n            options = this.state.list.map((item)=>{\r\n            return <option key={item.b_id}>{item.b_name}</option>\r\n            });\r\n        }\r\n        else if(this.state.list.length!==0 && this.state.type == 'generic'){\r\n            options = this.state.list.map((item)=>{\r\n            return <option key={item.g_id}>{item.g_name}</option>\r\n            });\r\n        }\r\n        return (\r\n            <Container>\r\n                <Head>\r\n                    <title>Initial</title>\r\n                    <link\r\n                        rel=\"stylesheet\"\r\n                        href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\"\r\n                    />\r\n                </Head>\r\n                <Form onSubmit={this.onSubmit}>\r\n                    <Form.Field>\r\n                        <h3 style = {{paddingTop: 30}}>Search Medicine</h3>\r\n                        <input\r\n                            id=\"searchDrug\"\r\n                            name= \"name\"\r\n                            placeholder='First Name'\r\n                            list=\"drugNameSuggestions\"\r\n                            autoComplete=\"off\"\r\n                            onChange={this.myChangeHandler}\r\n                            onKeyUp={this.onKeyUpHandler}\r\n                            value={this.state.name}\r\n                        />\r\n                        <datalist id=\"drugNameSuggestions\">\r\n                            {/* <option>paracetamol</option> */}\r\n                            {\r\n                                options\r\n                            }\r\n\r\n\r\n                        </datalist>\r\n                    </Form.Field>\r\n                    \r\n                    <Form.Field>\r\n                        <label>Search By</label>\r\n                        <Radio\r\n                            label='Brand Name'\r\n                            name='type'\r\n                            value='brand'\r\n                            checked={this.state.type === 'brand'}\r\n                            onChange={this.onRadioButtonChangeHandler}\r\n                        />\r\n                    </Form.Field>\r\n                    <Form.Field>\r\n                        <Radio\r\n                            label='Generic'\r\n                            name='type'\r\n                            value='generic'\r\n                            checked={this.state.type === 'generic'}\r\n                            onChange={this.onRadioButtonChangeHandler}\r\n\r\n                        />\r\n                    </Form.Field>\r\n                    <Button type='submit'>\r\n                        Submit\r\n                    </Button>\r\n                </Form>\r\n            </Container> \r\n        )\r\n    }\r\n}\r\n\r\nexport default Search ;"]},"metadata":{},"sourceType":"module"}