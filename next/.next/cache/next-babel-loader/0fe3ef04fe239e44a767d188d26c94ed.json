{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/usr/src/app/pages/search.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Head from \"next/head\";\nimport { Container, Icon, Radio, Form } from 'semantic-ui-react';\nimport medicineList from '../data/medicineList'; // import brandList from '../data/brandList';\n\nimport '../css/styles.css'; //Components\n\nimport SearchList from '../components/SearchComponents/SearchList';\nimport Navbar from '../components/Layout/Navbar';\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"myChangeHandler\", event => {\n      // console.log(event);\n      let name = event.target.name;\n      let value = event.target.value;\n      this.setState({\n        [name]: value\n      });\n    });\n\n    _defineProperty(this, \"onRadioButtonChangeHandler\", (event, v) => {\n      // this.setState({name: event.target.value});\n      console.log(v);\n      let name = v.name;\n      let value = v.value;\n      this.setState({\n        [name]: value,\n        url: `api/search/${value}`\n      });\n    });\n\n    _defineProperty(this, \"onClickHandler\", event => {\n      let name = event.target.name;\n      let value = event.target.value;\n      this.setState({\n        [name]: value\n      });\n      console.log(name + ': ' + event.target.value);\n    });\n\n    _defineProperty(this, \"onSubmit\", e => {\n      e.preventDefault();\n      console.log(\"Final Name Value: \" + this.state.name);\n      console.log(\"Type: \" + this.state.type);\n      let ref = this;\n      fetch(`api/${this.state.type}/${this.state.name}/search`).then(res => res.json()).then(data => {\n        if (this.state.type == 'brand') {\n          ref.setState({\n            fetchedData: data,\n            isSubmitted: true,\n            brandList: [{\n              name: data.name,\n              manufacturer: data.manufacturer\n            }]\n          }, () => console.log(this.state.fetchedData));\n        } else {\n          ref.setState({\n            fetchedData: data,\n            isSubmitted: true\n          }, () => console.log(this.state.fetchedData));\n        }\n      });\n\n      if (this.state.type == 'generic') {\n        fetch(`api/generic/${this.state.name}/brandlist`).then(res => res.json()).then(data => ref.setState({\n          brandList: data,\n          isSubmitted: true\n        }, () => console.log(this.state.brandList)));\n      }\n    });\n\n    _defineProperty(this, \"onKeyUpHandler\", e => {\n      let s = this.state;\n      let ref = this;\n\n      if (s.timer != null) {\n        window.clearTimeout(s.timer);\n      }\n\n      s.timer = setTimeout(function () {\n        if (s.name.length >= s.minlength) {\n          // var req = new XMLHttpRequest();\n          // req.addEventListener(\"load\", function(){\n          // \ts.draw(JSON.parse(this.responseText));\n          // });\n          // req.open(\"GET\", s.url + \"?term=\" + s.name);\n          // req.send();\n          fetch(s.url + \"?term=\" + s.name).then(res => res.json()).then(data => ref.setState({\n            list: data\n          }));\n        } // else{\n        // \ts.box.innerHTML='';\n        // }\n\n      }, s.delay);\n    });\n\n    this.state = {\n      name: '',\n      type: 'brand',\n      delay: 500,\n      minlength: 2,\n      timer: null,\n      url: 'api/search/brand',\n      list: [],\n      fetchedData: [],\n      brandList: [],\n      isSubmitted: false\n    };\n  }\n\n  render() {\n    // let searchAutocomplete = new Suggest ;\n    // searchAutocomplete.autoComplete(\"searchDrug\",\"drugNameSuggestions\",\"api/search/brand\");\n    let options = [];\n\n    if (this.state.list.length !== 0 && this.state.type == 'brand') {\n      options = this.state.list.map(item => {\n        return __jsx(\"option\", {\n          key: item.b_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, item.b_name);\n      });\n    } else if (this.state.list.length !== 0 && this.state.type == 'generic') {\n      options = this.state.list.map(item => {\n        return __jsx(\"option\", {\n          key: item.g_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, item.g_name);\n      });\n    } // return (\n    //     <Container>\n    //         <Head>\n    //             <title>Initial</title>\n    //             <link\n    //                 rel=\"stylesheet\"\n    //                 href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\"\n    //             />\n    //         </Head>\n    //         <Form onSubmit={this.onSubmit}>\n    //             <Form.Field>\n    //                 <h3 style = {{paddingTop: 30}}>Search Medicine</h3>\n    //                 <input\n    //                     id=\"searchDrug\"\n    //                     name= \"name\"\n    //                     placeholder='First Name'\n    //                     list=\"drugNameSuggestions\"\n    //                     autoComplete=\"off\"\n    //                     onChange={this.myChangeHandler}\n    //                     onKeyUp={this.onKeyUpHandler}\n    //                     value={this.state.name}\n    //                 />\n    //                 <datalist id=\"drugNameSuggestions\">\n    //                     {/* <option>paracetamol</option> */}\n    //                     {\n    //                         options\n    //                     }\n    //                 </datalist>\n    //             </Form.Field>\n    //             <Form.Field>\n    //                 <label>Search By</label>\n    //                 <Radio\n    //                     label='Brand Name'\n    //                     name='type'\n    //                     value='brand'\n    //                     checked={this.state.type === 'brand'}\n    //                     onChange={this.onRadioButtonChangeHandler}\n    //                 />\n    //             </Form.Field>\n    //             <Form.Field>\n    //                 <Radio\n    //                     label='Generic'\n    //                     name='type'\n    //                     value='generic'\n    //                     checked={this.state.type === 'generic'}\n    //                     onChange={this.onRadioButtonChangeHandler}\n    //                 />\n    //             </Form.Field>\n    //             <Button type='submit'>\n    //                 Submit\n    //             </Button>\n    //         </Form>\n    //     </Container> \n    // )\n\n\n    return __jsx(\"div\", {\n      className: \"search-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, __jsx(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), __jsx(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, __jsx(Head, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, __jsx(\"title\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Initial\"), __jsx(\"link\", {\n      rel: \"stylesheet\",\n      href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n      integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n      crossOrigin: \"anonymous\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), __jsx(\"link\", {\n      rel: \"stylesheet\",\n      href: \"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), __jsx(\"link\", {\n      href: \"https://fonts.googleapis.com/css?family=Oswald|Poppins|Shadows+Into+Light&display=swap\",\n      rel: \"stylesheet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    })), __jsx(\"div\", {\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, __jsx(Form, {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, __jsx(Form.Field, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      class: \"ui action input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      type: \"text\",\n      id: \"searchDrug\",\n      name: \"name\",\n      placeholder: \"Search Medicine\",\n      list: \"drugNameSuggestions\",\n      autoComplete: \"off\",\n      onChange: this.myChangeHandler,\n      onKeyUp: this.onKeyUpHandler,\n      value: this.state.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), __jsx(\"button\", {\n      class: \"ui button\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, __jsx(Icon, {\n      name: \"search\",\n      size: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }), \"Search\")), __jsx(\"datalist\", {\n      id: \"drugNameSuggestions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, options)), __jsx(Form.Field, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, __jsx(Radio, {\n      label: \"Brand\",\n      name: \"type\",\n      value: \"brand\",\n      checked: this.state.type === 'brand',\n      onChange: this.onRadioButtonChangeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    })), __jsx(Form.Field, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, __jsx(Radio, {\n      label: \"Generic\",\n      name: \"type\",\n      value: \"generic\",\n      checked: this.state.type === 'generic',\n      onChange: this.onRadioButtonChangeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    })))), this.state.isSubmitted && __jsx(SearchList, {\n      medicineList: this.state.fetchedData,\n      brandList: this.state.brandList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/usr/src/app/pages/search.js"],"names":["React","Head","Container","Icon","Radio","Form","medicineList","SearchList","Navbar","Search","Component","constructor","props","event","name","target","value","setState","v","console","log","url","e","preventDefault","state","type","ref","fetch","then","res","json","data","fetchedData","isSubmitted","brandList","manufacturer","s","timer","window","clearTimeout","setTimeout","length","minlength","list","delay","render","options","map","item","b_id","b_name","g_id","g_name","onSubmit","myChangeHandler","onKeyUpHandler","onRadioButtonChangeHandler"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Head from \"next/head\";\r\nimport { Container, Icon, Radio, Form } from 'semantic-ui-react';\r\nimport medicineList from '../data/medicineList';\r\n// import brandList from '../data/brandList';\r\nimport '../css/styles.css';\r\n\r\n\r\n//Components\r\nimport SearchList from '../components/SearchComponents/SearchList';\r\nimport Navbar from '../components/Layout/Navbar';\r\n\r\nclass Search extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: '',\r\n            type: 'brand',\r\n            delay: 500,\r\n\t\t    minlength: 2,\r\n            timer: null,\r\n            url: 'api/search/brand',\r\n            list: [],\r\n            fetchedData: [],\r\n            brandList: [],\r\n            isSubmitted: false\r\n        };\r\n    }\r\n\r\n    myChangeHandler = (event) => {\r\n        // console.log(event);\r\n        let name = event.target.name;\r\n        let value = event.target.value;\r\n        this.setState({[name]: value});\r\n    }\r\n\r\n    onRadioButtonChangeHandler = (event, v) => {\r\n        // this.setState({name: event.target.value});\r\n        console.log(v);\r\n        let name = v.name;\r\n        let value = v.value;\r\n        this.setState({[name]: value, url: `api/search/${value}`});\r\n    }\r\n\r\n    onClickHandler = (event) => {\r\n        let name = event.target.name;\r\n        let value = event.target.value;\r\n        this.setState({[name]: value});\r\n        console.log(name + ': ' + event.target.value);\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        console.log(\"Final Name Value: \" + this.state.name);\r\n        console.log(\"Type: \" + this.state.type);\r\n        let ref = this;\r\n        \r\n        fetch(`api/${this.state.type}/${this.state.name}/search`)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if(this.state.type=='brand'){\r\n                    ref.setState({fetchedData: data, isSubmitted: true, brandList:[{name: data.name, manufacturer: data.manufacturer}]}, \r\n                        ()=>(console.log(this.state.fetchedData)));\r\n                }\r\n                else {\r\n                    ref.setState({fetchedData: data, isSubmitted: true}, ()=>(console.log(this.state.fetchedData)));\r\n                }\r\n            });\r\n        \r\n        if(this.state.type=='generic'){\r\n            fetch(`api/generic/${this.state.name}/brandlist`)\r\n                .then(res => res.json())\r\n                .then(data => ref.setState({brandList: data, isSubmitted: true}, ()=>(console.log(this.state.brandList))));\r\n        }\r\n        \r\n    }\r\n\r\n    onKeyUpHandler = (e) => {\r\n        let s = this.state;\r\n        let ref = this;\r\n        if (s.timer!=null) { window.clearTimeout(s.timer); }\r\n\t\t\ts.timer = setTimeout(function(){\r\n\t\t\t\t\r\n\t\t\t\tif (s.name.length >= s.minlength) {\r\n\t\t\t\t\t// var req = new XMLHttpRequest();\r\n\t\t\t\t\t// req.addEventListener(\"load\", function(){\r\n\t\t\t\t\t// \ts.draw(JSON.parse(this.responseText));\r\n\t\t\t\t\t// });\r\n\t\t\t\t\t// req.open(\"GET\", s.url + \"?term=\" + s.name);\r\n                    // req.send();\r\n\r\n                    \r\n                    \r\n                    fetch(s.url+\"?term=\" + s.name)\r\n                        .then(res => res.json())\r\n                        .then(data => ref.setState({list: data}));\r\n\t\t\t\t}\r\n\t\t\t\t// else{\r\n\t\t\t\t// \ts.box.innerHTML='';\r\n\t\t\t\t// }\r\n\r\n\t\t\t}, s.delay);\r\n    }\r\n\r\n    render () {\r\n        // let searchAutocomplete = new Suggest ;\r\n        // searchAutocomplete.autoComplete(\"searchDrug\",\"drugNameSuggestions\",\"api/search/brand\");\r\n        let options = [];\r\n        if(this.state.list.length!==0 && this.state.type == 'brand'){\r\n            options = this.state.list.map((item)=>{\r\n            return <option key={item.b_id}>{item.b_name}</option>\r\n            });\r\n        }\r\n        else if(this.state.list.length!==0 && this.state.type == 'generic'){\r\n            options = this.state.list.map((item)=>{\r\n            return <option key={item.g_id}>{item.g_name}</option>\r\n            });\r\n        }\r\n        // return (\r\n        //     <Container>\r\n        //         <Head>\r\n        //             <title>Initial</title>\r\n        //             <link\r\n        //                 rel=\"stylesheet\"\r\n        //                 href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\"\r\n        //             />\r\n        //         </Head>\r\n        //         <Form onSubmit={this.onSubmit}>\r\n        //             <Form.Field>\r\n        //                 <h3 style = {{paddingTop: 30}}>Search Medicine</h3>\r\n        //                 <input\r\n        //                     id=\"searchDrug\"\r\n        //                     name= \"name\"\r\n        //                     placeholder='First Name'\r\n        //                     list=\"drugNameSuggestions\"\r\n        //                     autoComplete=\"off\"\r\n        //                     onChange={this.myChangeHandler}\r\n        //                     onKeyUp={this.onKeyUpHandler}\r\n        //                     value={this.state.name}\r\n        //                 />\r\n        //                 <datalist id=\"drugNameSuggestions\">\r\n        //                     {/* <option>paracetamol</option> */}\r\n        //                     {\r\n        //                         options\r\n        //                     }\r\n\r\n\r\n        //                 </datalist>\r\n        //             </Form.Field>\r\n                    \r\n        //             <Form.Field>\r\n        //                 <label>Search By</label>\r\n        //                 <Radio\r\n        //                     label='Brand Name'\r\n        //                     name='type'\r\n        //                     value='brand'\r\n        //                     checked={this.state.type === 'brand'}\r\n        //                     onChange={this.onRadioButtonChangeHandler}\r\n        //                 />\r\n        //             </Form.Field>\r\n        //             <Form.Field>\r\n        //                 <Radio\r\n        //                     label='Generic'\r\n        //                     name='type'\r\n        //                     value='generic'\r\n        //                     checked={this.state.type === 'generic'}\r\n        //                     onChange={this.onRadioButtonChangeHandler}\r\n\r\n        //                 />\r\n        //             </Form.Field>\r\n        //             <Button type='submit'>\r\n        //                 Submit\r\n        //             </Button>\r\n        //         </Form>\r\n        //     </Container> \r\n        // )\r\n\r\n        return (\r\n            <div className = \"search-page\">\r\n                <Navbar />\r\n                <Container>\r\n                    <Head>\r\n                        <title>Initial</title>\r\n                        <link\r\n                            rel=\"stylesheet\"\r\n                            href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\r\n                            integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\"\r\n                            crossOrigin=\"anonymous\"\r\n                        />\r\n                        <link\r\n                            rel=\"stylesheet\"\r\n                            href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\"\r\n                        />\r\n                        <link href=\"https://fonts.googleapis.com/css?family=Oswald|Poppins|Shadows+Into+Light&display=swap\" rel=\"stylesheet\"></link>\r\n                    </Head>\r\n                    <div className = \"form\">\r\n                        <Form onSubmit={this.onSubmit}>\r\n                            <Form.Field>\r\n                                {/* <h3>Search Medicine</h3> */}\r\n                                <div class=\"ui action input\">\r\n                                    <input \r\n                                        type=\"text\"\r\n                                        id=\"searchDrug\"\r\n                                        name= \"name\"\r\n                                        placeholder='Search Medicine'\r\n                                        list=\"drugNameSuggestions\"\r\n                                        autoComplete=\"off\"\r\n                                        onChange={this.myChangeHandler}\r\n                                        onKeyUp={this.onKeyUpHandler}\r\n                                        value={this.state.name}\r\n                                    />\r\n                                    <button class=\"ui button\" type='submit'>\r\n                                        <Icon name=\"search\" size=\"large\"></Icon>\r\n                                        Search\r\n                                    </button>\r\n                                </div>\r\n                                <datalist id=\"drugNameSuggestions\">\r\n                                    {/* <option>paracetamol</option> */}\r\n                                    {\r\n                                        options\r\n                                    }\r\n\r\n\r\n                                </datalist>\r\n                            </Form.Field>\r\n                            \r\n                            <Form.Field>\r\n                                <Radio\r\n                                    label='Brand'\r\n                                    name='type'\r\n                                    value='brand'\r\n                                    checked={this.state.type === 'brand'}\r\n                                    onChange={this.onRadioButtonChangeHandler}\r\n                                />\r\n                            </Form.Field>\r\n                            <Form.Field>\r\n                                <Radio\r\n                                    label='Generic'\r\n                                    name='type'\r\n                                    value='generic'\r\n                                    checked={this.state.type === 'generic'}\r\n                                    onChange={this.onRadioButtonChangeHandler}\r\n\r\n                                />\r\n                            </Form.Field>\r\n                        </Form>\r\n                    </div>\r\n                    {this.state.isSubmitted && <SearchList medicineList = {this.state.fetchedData} brandList= {this.state.brandList}/>}\r\n                </Container>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Search ;"]},"metadata":{},"sourceType":"module"}