{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/usr/src/app/pages/search.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Head from \"next/head\";\nimport { Container, Icon, Radio, Form } from 'semantic-ui-react';\nimport medicineList from '../data/medicineList'; // import brandList from '../data/brandList';\n\nimport '../css/styles.css'; //Components\n\nimport SearchList from '../components/SearchComponents/SearchList';\nimport Navbar from '../components/Layout/Navbar';\n\nvar Search =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Search, _React$Component);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"myChangeHandler\", function (event) {\n      // console.log(event);\n      var name = event.target.name;\n      var value = event.target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRadioButtonChangeHandler\", function (event, v) {\n      var _this$setState2;\n\n      // this.setState({name: event.target.value});\n      console.log(v);\n      var name = v.name;\n      var value = v.value;\n\n      _this.setState((_this$setState2 = {}, _defineProperty(_this$setState2, name, value), _defineProperty(_this$setState2, \"url\", \"api/search/\".concat(value)), _this$setState2));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickHandler\", function (event) {\n      var name = event.target.name;\n      var value = event.target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n\n      console.log(name + ': ' + event.target.value);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function (e) {\n      e.preventDefault();\n      console.log(\"Final Name Value: \" + _this.state.name);\n      console.log(\"Type: \" + _this.state.type);\n\n      var ref = _assertThisInitialized(_this);\n\n      fetch(\"api/\".concat(_this.state.type, \"/\").concat(_this.state.name, \"/search\")).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        return ref.setState({\n          fetchedData: data,\n          isSubmitted: true\n        }, function () {\n          return console.log(_this.state.fetchedData);\n        });\n      });\n\n      if (_this.state.type == 'generic') {\n        fetch(\"api/generic/\".concat(_this.state.name, \"/brandlist\")).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          return ref.setState({\n            brandList: data,\n            isSubmitted: true\n          }, function () {\n            return console.log(_this.state.brandList);\n          });\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyUpHandler\", function (e) {\n      var s = _this.state;\n\n      var ref = _assertThisInitialized(_this);\n\n      if (s.timer != null) {\n        window.clearTimeout(s.timer);\n      }\n\n      s.timer = setTimeout(function () {\n        if (s.name.length >= s.minlength) {\n          // var req = new XMLHttpRequest();\n          // req.addEventListener(\"load\", function(){\n          // \ts.draw(JSON.parse(this.responseText));\n          // });\n          // req.open(\"GET\", s.url + \"?term=\" + s.name);\n          // req.send();\n          fetch(s.url + \"?term=\" + s.name).then(function (res) {\n            return res.json();\n          }).then(function (data) {\n            return ref.setState({\n              list: data\n            });\n          });\n        } // else{\n        // \ts.box.innerHTML='';\n        // }\n\n      }, s.delay);\n    });\n\n    _this.state = {\n      name: '',\n      type: 'brand',\n      delay: 500,\n      minlength: 2,\n      timer: null,\n      url: 'api/search/brand',\n      list: [],\n      fetchedData: [],\n      brandList: [],\n      isSubmitted: false\n    };\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"render\",\n    value: function render() {\n      // let searchAutocomplete = new Suggest ;\n      // searchAutocomplete.autoComplete(\"searchDrug\",\"drugNameSuggestions\",\"api/search/brand\");\n      var options = [];\n\n      if (this.state.list.length !== 0 && this.state.type == 'brand') {\n        options = this.state.list.map(function (item) {\n          return __jsx(\"option\", {\n            key: item.b_id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103\n            },\n            __self: this\n          }, item.b_name);\n        });\n      } else if (this.state.list.length !== 0 && this.state.type == 'generic') {\n        options = this.state.list.map(function (item) {\n          return __jsx(\"option\", {\n            key: item.g_id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108\n            },\n            __self: this\n          }, item.g_name);\n        });\n      } // return (\n      //     <Container>\n      //         <Head>\n      //             <title>Initial</title>\n      //             <link\n      //                 rel=\"stylesheet\"\n      //                 href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\"\n      //             />\n      //         </Head>\n      //         <Form onSubmit={this.onSubmit}>\n      //             <Form.Field>\n      //                 <h3 style = {{paddingTop: 30}}>Search Medicine</h3>\n      //                 <input\n      //                     id=\"searchDrug\"\n      //                     name= \"name\"\n      //                     placeholder='First Name'\n      //                     list=\"drugNameSuggestions\"\n      //                     autoComplete=\"off\"\n      //                     onChange={this.myChangeHandler}\n      //                     onKeyUp={this.onKeyUpHandler}\n      //                     value={this.state.name}\n      //                 />\n      //                 <datalist id=\"drugNameSuggestions\">\n      //                     {/* <option>paracetamol</option> */}\n      //                     {\n      //                         options\n      //                     }\n      //                 </datalist>\n      //             </Form.Field>\n      //             <Form.Field>\n      //                 <label>Search By</label>\n      //                 <Radio\n      //                     label='Brand Name'\n      //                     name='type'\n      //                     value='brand'\n      //                     checked={this.state.type === 'brand'}\n      //                     onChange={this.onRadioButtonChangeHandler}\n      //                 />\n      //             </Form.Field>\n      //             <Form.Field>\n      //                 <Radio\n      //                     label='Generic'\n      //                     name='type'\n      //                     value='generic'\n      //                     checked={this.state.type === 'generic'}\n      //                     onChange={this.onRadioButtonChangeHandler}\n      //                 />\n      //             </Form.Field>\n      //             <Button type='submit'>\n      //                 Submit\n      //             </Button>\n      //         </Form>\n      //     </Container> \n      // )\n\n\n      return __jsx(\"div\", {\n        className: \"search-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, __jsx(Navbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), __jsx(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, __jsx(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, __jsx(\"title\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Initial\"), __jsx(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n        integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n        crossOrigin: \"anonymous\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), __jsx(\"link\", {\n        rel: \"stylesheet\",\n        href: \"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }), __jsx(\"link\", {\n        href: \"https://fonts.googleapis.com/css?family=Oswald|Poppins|Shadows+Into+Light&display=swap\",\n        rel: \"stylesheet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, __jsx(Form, {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, __jsx(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        \"class\": \"ui action input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, __jsx(\"input\", {\n        type: \"text\",\n        id: \"searchDrug\",\n        name: \"name\",\n        placeholder: \"Search Medicine\",\n        list: \"drugNameSuggestions\",\n        autoComplete: \"off\",\n        onChange: this.myChangeHandler,\n        onKeyUp: this.onKeyUpHandler,\n        value: this.state.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), __jsx(\"button\", {\n        \"class\": \"ui button\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, __jsx(Icon, {\n        name: \"search\",\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }), \"Search\")), __jsx(\"datalist\", {\n        id: \"drugNameSuggestions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, options)), __jsx(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, __jsx(Radio, {\n        label: \"Brand\",\n        name: \"type\",\n        value: \"brand\",\n        checked: this.state.type === 'brand',\n        onChange: this.onRadioButtonChangeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      })), __jsx(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, __jsx(Radio, {\n        label: \"Generic\",\n        name: \"type\",\n        value: \"generic\",\n        checked: this.state.type === 'generic',\n        onChange: this.onRadioButtonChangeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      })))), this.state.isSubmitted && __jsx(SearchList, {\n        medicineList: fetchedData,\n        brandList: brandList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Search;\n}(React.Component);\n\nexport default Search;","map":{"version":3,"sources":["/usr/src/app/pages/search.js"],"names":["React","Head","Container","Icon","Radio","Form","medicineList","SearchList","Navbar","Search","props","event","name","target","value","setState","v","console","log","e","preventDefault","state","type","ref","fetch","then","res","json","data","fetchedData","isSubmitted","brandList","s","timer","window","clearTimeout","setTimeout","length","minlength","url","list","delay","options","map","item","b_id","b_name","g_id","g_name","onSubmit","myChangeHandler","onKeyUpHandler","onRadioButtonChangeHandler","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Head from \"next/head\";\r\nimport { Container, Icon, Radio, Form } from 'semantic-ui-react';\r\nimport medicineList from '../data/medicineList';\r\n// import brandList from '../data/brandList';\r\nimport '../css/styles.css';\r\n\r\n\r\n//Components\r\nimport SearchList from '../components/SearchComponents/SearchList';\r\nimport Navbar from '../components/Layout/Navbar';\r\n\r\nclass Search extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: '',\r\n            type: 'brand',\r\n            delay: 500,\r\n\t\t    minlength: 2,\r\n            timer: null,\r\n            url: 'api/search/brand',\r\n            list: [],\r\n            fetchedData: [],\r\n            brandList: [],\r\n            isSubmitted: false\r\n        };\r\n    }\r\n\r\n    myChangeHandler = (event) => {\r\n        // console.log(event);\r\n        let name = event.target.name;\r\n        let value = event.target.value;\r\n        this.setState({[name]: value});\r\n    }\r\n\r\n    onRadioButtonChangeHandler = (event, v) => {\r\n        // this.setState({name: event.target.value});\r\n        console.log(v);\r\n        let name = v.name;\r\n        let value = v.value;\r\n        this.setState({[name]: value, url: `api/search/${value}`});\r\n    }\r\n\r\n    onClickHandler = (event) => {\r\n        let name = event.target.name;\r\n        let value = event.target.value;\r\n        this.setState({[name]: value});\r\n        console.log(name + ': ' + event.target.value);\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        console.log(\"Final Name Value: \" + this.state.name);\r\n        console.log(\"Type: \" + this.state.type);\r\n        let ref = this;\r\n        \r\n        fetch(`api/${this.state.type}/${this.state.name}/search`)\r\n            .then(res => res.json())\r\n            .then(data => ref.setState({fetchedData: data, isSubmitted: true}, ()=>(console.log(this.state.fetchedData))));\r\n        \r\n        if(this.state.type=='generic'){\r\n            fetch(`api/generic/${this.state.name}/brandlist`)\r\n                .then(res => res.json())\r\n                .then(data => ref.setState({brandList: data, isSubmitted: true}, ()=>(console.log(this.state.brandList))));\r\n        }\r\n        \r\n    }\r\n\r\n    onKeyUpHandler = (e) => {\r\n        let s = this.state;\r\n        let ref = this;\r\n        if (s.timer!=null) { window.clearTimeout(s.timer); }\r\n\t\t\ts.timer = setTimeout(function(){\r\n\t\t\t\t\r\n\t\t\t\tif (s.name.length >= s.minlength) {\r\n\t\t\t\t\t// var req = new XMLHttpRequest();\r\n\t\t\t\t\t// req.addEventListener(\"load\", function(){\r\n\t\t\t\t\t// \ts.draw(JSON.parse(this.responseText));\r\n\t\t\t\t\t// });\r\n\t\t\t\t\t// req.open(\"GET\", s.url + \"?term=\" + s.name);\r\n                    // req.send();\r\n\r\n                    \r\n                    \r\n                    fetch(s.url+\"?term=\" + s.name)\r\n                        .then(res => res.json())\r\n                        .then(data => ref.setState({list: data}));\r\n\t\t\t\t}\r\n\t\t\t\t// else{\r\n\t\t\t\t// \ts.box.innerHTML='';\r\n\t\t\t\t// }\r\n\r\n\t\t\t}, s.delay);\r\n    }\r\n\r\n    render () {\r\n        // let searchAutocomplete = new Suggest ;\r\n        // searchAutocomplete.autoComplete(\"searchDrug\",\"drugNameSuggestions\",\"api/search/brand\");\r\n        let options = [];\r\n        if(this.state.list.length!==0 && this.state.type == 'brand'){\r\n            options = this.state.list.map((item)=>{\r\n            return <option key={item.b_id}>{item.b_name}</option>\r\n            });\r\n        }\r\n        else if(this.state.list.length!==0 && this.state.type == 'generic'){\r\n            options = this.state.list.map((item)=>{\r\n            return <option key={item.g_id}>{item.g_name}</option>\r\n            });\r\n        }\r\n        // return (\r\n        //     <Container>\r\n        //         <Head>\r\n        //             <title>Initial</title>\r\n        //             <link\r\n        //                 rel=\"stylesheet\"\r\n        //                 href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\"\r\n        //             />\r\n        //         </Head>\r\n        //         <Form onSubmit={this.onSubmit}>\r\n        //             <Form.Field>\r\n        //                 <h3 style = {{paddingTop: 30}}>Search Medicine</h3>\r\n        //                 <input\r\n        //                     id=\"searchDrug\"\r\n        //                     name= \"name\"\r\n        //                     placeholder='First Name'\r\n        //                     list=\"drugNameSuggestions\"\r\n        //                     autoComplete=\"off\"\r\n        //                     onChange={this.myChangeHandler}\r\n        //                     onKeyUp={this.onKeyUpHandler}\r\n        //                     value={this.state.name}\r\n        //                 />\r\n        //                 <datalist id=\"drugNameSuggestions\">\r\n        //                     {/* <option>paracetamol</option> */}\r\n        //                     {\r\n        //                         options\r\n        //                     }\r\n\r\n\r\n        //                 </datalist>\r\n        //             </Form.Field>\r\n                    \r\n        //             <Form.Field>\r\n        //                 <label>Search By</label>\r\n        //                 <Radio\r\n        //                     label='Brand Name'\r\n        //                     name='type'\r\n        //                     value='brand'\r\n        //                     checked={this.state.type === 'brand'}\r\n        //                     onChange={this.onRadioButtonChangeHandler}\r\n        //                 />\r\n        //             </Form.Field>\r\n        //             <Form.Field>\r\n        //                 <Radio\r\n        //                     label='Generic'\r\n        //                     name='type'\r\n        //                     value='generic'\r\n        //                     checked={this.state.type === 'generic'}\r\n        //                     onChange={this.onRadioButtonChangeHandler}\r\n\r\n        //                 />\r\n        //             </Form.Field>\r\n        //             <Button type='submit'>\r\n        //                 Submit\r\n        //             </Button>\r\n        //         </Form>\r\n        //     </Container> \r\n        // )\r\n\r\n        return (\r\n            <div className = \"search-page\">\r\n                <Navbar />\r\n                <Container>\r\n                    <Head>\r\n                        <title>Initial</title>\r\n                        <link\r\n                            rel=\"stylesheet\"\r\n                            href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\r\n                            integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\"\r\n                            crossOrigin=\"anonymous\"\r\n                        />\r\n                        <link\r\n                            rel=\"stylesheet\"\r\n                            href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\"\r\n                        />\r\n                        <link href=\"https://fonts.googleapis.com/css?family=Oswald|Poppins|Shadows+Into+Light&display=swap\" rel=\"stylesheet\"></link>\r\n                    </Head>\r\n                    <div className = \"form\">\r\n                        <Form onSubmit={this.onSubmit}>\r\n                            <Form.Field>\r\n                                {/* <h3>Search Medicine</h3> */}\r\n                                <div class=\"ui action input\">\r\n                                    <input \r\n                                        type=\"text\"\r\n                                        id=\"searchDrug\"\r\n                                        name= \"name\"\r\n                                        placeholder='Search Medicine'\r\n                                        list=\"drugNameSuggestions\"\r\n                                        autoComplete=\"off\"\r\n                                        onChange={this.myChangeHandler}\r\n                                        onKeyUp={this.onKeyUpHandler}\r\n                                        value={this.state.name}\r\n                                    />\r\n                                    <button class=\"ui button\" type='submit'>\r\n                                        <Icon name=\"search\" size=\"large\"></Icon>\r\n                                        Search\r\n                                    </button>\r\n                                </div>\r\n                                <datalist id=\"drugNameSuggestions\">\r\n                                    {/* <option>paracetamol</option> */}\r\n                                    {\r\n                                        options\r\n                                    }\r\n\r\n\r\n                                </datalist>\r\n                            </Form.Field>\r\n                            \r\n                            <Form.Field>\r\n                                <Radio\r\n                                    label='Brand'\r\n                                    name='type'\r\n                                    value='brand'\r\n                                    checked={this.state.type === 'brand'}\r\n                                    onChange={this.onRadioButtonChangeHandler}\r\n                                />\r\n                            </Form.Field>\r\n                            <Form.Field>\r\n                                <Radio\r\n                                    label='Generic'\r\n                                    name='type'\r\n                                    value='generic'\r\n                                    checked={this.state.type === 'generic'}\r\n                                    onChange={this.onRadioButtonChangeHandler}\r\n\r\n                                />\r\n                            </Form.Field>\r\n                        </Form>\r\n                    </div>\r\n                    {this.state.isSubmitted && <SearchList medicineList = {fetchedData} brandList= {brandList}/>}\r\n                </Container>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Search ;"]},"metadata":{},"sourceType":"module"}